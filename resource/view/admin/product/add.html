{{define "admin.product.add"}}
    {{template "admin.app" .}}
    <link rel="stylesheet" href="/static/components/easyUpload/main.css">
    <!-- Content Wrapper. Contains page content -->
    <div class="content-wrapper">
        <!-- Content Header (Page header) -->
        <section class="content-header">
            <h1>
                商品管理
                <small>添加商品</small>
            </h1>
            <ol class="breadcrumb">
                <li><a href="/admin"><i class="fa fa-dashboard"></i> 首页</a></li>
                <li><a href="/admin/product/add">添加商品</a></li>
                <li class="active">商品列表</li>
            </ol>
        </section>
        <!-- Main content -->
        <section class="content">

            <div class="row">
                <div class="col-xs-12">
                    <div class="box">
                        <div class="box-body">
                            <div class="col-md-12">
                                <!-- Custom Tabs -->
                                <div>
                                    <div class="box-header with-border">
                                        <h3 class="box-title">商品基本信息</h3>
                                    </div>
                                    <!-- form start -->
                                    {{if .errors}}
                                        <form class="form-horizontal" method="post" action="/admin/product/add">
                                            <div class="box-body">
                                                <div class="nav-tabs-custom">
                                                    <ul class="nav nav-tabs">
                                                        <li class="active">
                                                            <a href="#tab_1" data-toggle="tab">
                                                                基本信息
                                                            </a>
                                                        </li>
                                                        <li>
                                                            <a href="#tab_2" data-toggle="tab">
                                                                基本信息
                                                            </a>
                                                        </li>
                                                        <li>
                                                            <a href="#tab_3" data-toggle="tab">
                                                                图片
                                                            </a>
                                                        </li>
                                                    </ul>
                                                    <div class="tab-content">
                                                        <div class="tab-pane active" id="tab_1">
                                                            <div class="form-group {{if .errors.ProductName}}has-error{{end}}">
                                                                <label for="productName"
                                                                       class="col-sm-2 control-label">商品名称</label>

                                                                <div class="col-sm-10">
                                                                    <input type="text" name="productName"
                                                                           class="form-control"
                                                                           value="{{.product.ProductName}}"
                                                                           id="productName" placeholder="商品名称">
                                                                    <span class="help-block">{{.errors.ProductName}}</span>
                                                                </div>
                                                            </div>
                                                            <div class="form-group {{if .errors.Description}}has-error{{end}}">
                                                                <label for="description"
                                                                       class="col-sm-2 control-label">描述</label>

                                                                <div class="col-sm-10">
                                                                <textarea type="text" class="form-control"
                                                                          name="description"
                                                                          id="description"
                                                                          placeholder="商品描述">{{.product.Description}}</textarea>
                                                                    <span class="help-block">{{.errors.Description}}</span>

                                                                </div>
                                                            </div>
                                                            <div class="form-group {{if .errors.Keyword}}has-error{{end}}">
                                                                <label for="keyword"
                                                                       class="col-sm-2 control-label">关键字</label>

                                                                <div class="col-sm-10">
                                                                    <input type="text" class="form-control"
                                                                           name="keyword"
                                                                           value="{{.product.Keyword}}"
                                                                           id="keyword" placeholder="商品关键字">
                                                                    <span class="help-block">{{.errors.Keyword}}</span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <!-- /.tab-pane -->
                                                        <div class="tab-pane" id="tab_2">


                                                            <div class="form-group {{if .errors.Type}}has-error{{end}}">
                                                                <label for="type"
                                                                       class="col-sm-2 control-label">型号</label>

                                                                <div class="col-sm-10">
                                                                    <input type="text" class="form-control"
                                                                           value="{{.product.Type}}"
                                                                           required
                                                                           name="type"
                                                                           id="type" placeholder="商品型号">
                                                                    <span class="help-block">{{.errors.Type}}</span>
                                                                </div>
                                                            </div>

                                                            <div class="form-group {{if .errors.Sku}}has-error{{end}}">
                                                                <label for="sku"
                                                                       class="col-sm-2 control-label">sku</label>

                                                                <div class="col-sm-10">
                                                                    <input type="text" class="form-control"
                                                                           value="{{.product.Sku}}"
                                                                           required
                                                                           name="sku"
                                                                           id="sku" placeholder="sku">
                                                                    <span class="help-block">{{.errors.Sku}}</span>
                                                                </div>
                                                            </div>

                                                            <div class="form-group {{if .errors.Stock}}has-error{{end}}">
                                                                <label for="sku"
                                                                       class="col-sm-2 control-label">库存</label>

                                                                <div class="col-sm-10">
                                                                    <input type="text" class="form-control"
                                                                           value="{{.product.Stock}}"
                                                                           required
                                                                           name="sku"
                                                                           id="sku" placeholder="库存">
                                                                    <span class="help-block">{{.errors.Stock}}</span>
                                                                </div>
                                                            </div>

                                                            <div class="form-group {{if .errors.Price}}has-error{{end}}">
                                                                <label for="price"
                                                                       class="col-sm-2 control-label">价格</label>

                                                                <div class="col-sm-10">
                                                                    <input type="text" class="form-control"
                                                                           value="{{.product.Price}}"
                                                                           required
                                                                           name="price"
                                                                           id="price" placeholder="价格">
                                                                    <span class="help-block">{{.errors.Price}}</span>
                                                                </div>
                                                            </div>

                                                            <div class="form-group {{if .errors.Width}}has-error{{end}}">
                                                                <label for="width"
                                                                       class="col-sm-2 control-label">宽度</label>
                                                                <div class="col-sm-10">
                                                                    <input type="text" class="form-control"
                                                                           value="{{.product.Width}}"
                                                                           required
                                                                           name="width"
                                                                           id="width" placeholder="宽度">
                                                                    <span class="help-block">{{.errors.Width}}</span>
                                                                </div>
                                                            </div>

                                                            <div class="form-group {{if .errors.Height}}has-error{{end}}">
                                                                <label for="height"
                                                                       class="col-sm-2 control-label">高度</label>

                                                                <div class="col-sm-10">
                                                                    <input type="text" class="form-control"
                                                                           value="{{.product.Height}}"
                                                                           required
                                                                           name="height"
                                                                           id="height" placeholder="高度">
                                                                    <span class="help-block">{{.errors.Height}}</span>
                                                                </div>
                                                            </div>

                                                            <div class="form-group {{if .errors.Weight}}has-error{{end}}">
                                                                <label for="weight"
                                                                       class="col-sm-2 control-label">重量</label>

                                                                <div class="col-sm-10">
                                                                    <input type="text" class="form-control"
                                                                           value="{{.product.Weight}}"
                                                                           required
                                                                           name="weight"
                                                                           id="weight" placeholder="重量">
                                                                    <span class="help-block">{{.errors.Weight}}</span>
                                                                </div>
                                                            </div>


                                                        </div>
                                                        <!-- /.tab-pane -->
                                                        <div class="tab-pane" id="tab_3">
                                                            Lorem Ipsum is simply dummy text of the printing and
                                                            typesetting
                                                            industry.
                                                            Lorem Ipsum has been the industry's standard dummy text ever
                                                            since the 1500s,
                                                            when an unknown printer took a galley of type and scrambled
                                                            it
                                                            to make a type specimen book.
                                                            It has survived not only five centuries, but also the leap
                                                            into
                                                            electronic typesetting,
                                                            remaining essentially unchanged. It was popularised in the
                                                            1960s
                                                            with the release of
                                                            Letraset
                                                            sheets containing Lorem Ipsum passages, and more recently
                                                            with
                                                            desktop publishing software
                                                            like Aldus PageMaker including versions of Lorem Ipsum.
                                                        </div>
                                                        <!-- /.tab-pane -->
                                                    </div>
                                                    <!-- /.tab-content -->
                                                </div>
                                            </div>
                                            <!-- /.box-body -->
                                            <div class="box-footer text-center">
                                                <button type="submit" class="btn btn-default">取消</button>
                                                <button type="submit" class="btn btn-primary">新增</button>
                                            </div>
                                            <!-- /.box-footer -->
                                        </form>
                                    {{else}}
                                        <form class="form-horizontal" method="post" action="/admin/product/add">
                                            <div class="box-body">
                                                <div class="nav-tabs-custom">
                                                    <ul class="nav nav-tabs">
                                                        <li class="active">
                                                            <a href="#tab_1" data-toggle="tab">
                                                                基本信息
                                                            </a>
                                                        </li>
                                                        <li>
                                                            <a href="#tab_2" data-toggle="tab">
                                                                参数
                                                            </a>
                                                        </li>
                                                        <li>
                                                            <a href="#tab_3" data-toggle="tab">
                                                                图片
                                                            </a>
                                                        </li>
                                                    </ul>
                                                    <div class="tab-content">
                                                        <div class="tab-pane active" id="tab_1">
                                                            <div class="form-group">
                                                                <label for="productName"
                                                                       class="col-sm-2 control-label">商品名称</label>

                                                                <div class="col-sm-10">
                                                                    <input type="text" name="productName"
                                                                           required
                                                                           class="form-control"
                                                                           id="productName" placeholder="商品名称">
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                <label for="description"
                                                                       class="col-sm-2 control-label">描述</label>

                                                                <div class="col-sm-10">
                                                                <textarea type="text" class="form-control"
                                                                          required
                                                                          name="description"
                                                                          id="description"
                                                                          placeholder="商品描述"></textarea>
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                <label for="keyword"
                                                                       class="col-sm-2 control-label">关键字</label>

                                                                <div class="col-sm-10">
                                                                    <input type="text" class="form-control"
                                                                           required
                                                                           name="keyword"
                                                                           id="keyword" placeholder="商品关键字">
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <!-- /.tab-pane -->
                                                        <div class="tab-pane" id="tab_2">


                                                            <div class="form-group">
                                                                <label for="type"
                                                                       class="col-sm-2 control-label">型号</label>

                                                                <div class="col-sm-10">
                                                                    <input type="text" class="form-control"
                                                                           required
                                                                           name="type"
                                                                           id="type" placeholder="商品型号">
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                <label for="sku"
                                                                       class="col-sm-2 control-label">sku</label>

                                                                <div class="col-sm-10">
                                                                    <input type="text" class="form-control"
                                                                           required
                                                                           name="sku"
                                                                           id="sku" placeholder="sku">
                                                                </div>
                                                            </div>

                                                            <div class="form-group">
                                                                <label for="stock"
                                                                       class="col-sm-2 control-label">库存</label>

                                                                <div class="col-sm-10">
                                                                    <input type="text" class="form-control"
                                                                           required
                                                                           name="stock"
                                                                           id="stock" placeholder="库存">
                                                                </div>
                                                            </div>

                                                            <div class="form-group">
                                                                <label for="price"
                                                                       class="col-sm-2 control-label">价格</label>

                                                                <div class="col-sm-10">
                                                                    <input type="text" class="form-control"
                                                                           required
                                                                           name="price"
                                                                           id="price" placeholder="价格">
                                                                </div>
                                                            </div>

                                                            <div class="form-group">
                                                                <label for="width"
                                                                       class="col-sm-2 control-label">宽度</label>

                                                                <div class="col-sm-10">
                                                                    <input type="text" class="form-control"
                                                                           required
                                                                           name="width"
                                                                           id="width" placeholder="宽度">
                                                                </div>
                                                            </div>

                                                            <div class="form-group">
                                                                <label for="height"
                                                                       class="col-sm-2 control-label">高度</label>

                                                                <div class="col-sm-10">
                                                                    <input type="text" class="form-control"
                                                                           required
                                                                           name="height"
                                                                           id="height" placeholder="高度">
                                                                </div>
                                                            </div>

                                                            <div class="form-group">
                                                                <label for="weight"
                                                                       class="col-sm-2 control-label">重量</label>

                                                                <div class="col-sm-10">
                                                                    <input type="text" class="form-control"
                                                                           required
                                                                           name="weight"
                                                                           id="weight" placeholder="重量">
                                                                </div>
                                                            </div>

                                                        </div>
                                                        <!-- /.tab-pane -->
                                                        <div class="tab-pane" id="tab_3">

                                                            <div id="uploader" class="row"></div>


                                                        </div>
                                                        <!-- /.tab-pane -->
                                                    </div>
                                                    <!-- /.tab-content -->
                                                </div>
                                            </div>
                                            <!-- /.box-body -->
                                            <div class="box-footer text-center">
                                                <button type="submit" class="btn btn-default">取消</button>
                                                <button type="submit" class="btn btn-primary">新增</button>
                                            </div>
                                            <!-- /.box-footer -->
                                        </form>
                                    {{end}}
                                </div>


                                <!-- nav-tabs-custom -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>


        </section>
        <!-- /.content -->
    </div>

    {{template "admin.footer"}}
    <script src="/static/components/easyUpload/easyUploader.js"></script>
    <script>
        var uploader = easyUploader({
            id: "uploader",
            accept: '.jpg,.png,.doc,.docx',
            action: '/admin/upload',
            dataFormat: 'formData',
            maxCount: 10,
            maxSize: 3,
            multiple: false,
            name: 'file', /* 上传的文件字段名 */
            data: ["aaaa","bbbb"],
            beforeUpload: function (file, data, args) {
                /* dataFormat为formData时配置发送数据的方式 */
                data.append('token', '387126b0-7b3e-4a2a-86ad-ae5c5edd0ae6TT');
                data.append('otherKey', 'otherValue');

                /* dataFormat为base64时配置发送数据的方式 */
                // data.base = file.base;
                // data.token = '387126b0-7b3e-4a2a-86ad-ae5c5edd0ae6TT';
                // data.otherKey = 'otherValue';
            },
            onChange: function (fileList) {
                /* input选中时触发 */
            },
            onRemove: function (removedFiles, files) {
                console.log('onRemove', removedFiles);
            },
            onSuccess: function (res) {
                // console.log('onSuccess', res);

                /**
                 * 注意，接口调通不代表视图会展示成功，接口调通时视图要展示成功需要满足以下两点条件
                 * 1. 返回数据必须由对象包裹，如 { code: 200, data: null }
                 * 2. 必须有一个用于标识成功状态的属性，默认属性是code，默认成功属性值是200，配置项分别对应successKey和successValue，可视情况自行配置
                 */

                /**
                 * 可以在onSuccess/onError等回调函数中通过实例的files属性可以访问上传文件，如 var files = uploader.files; console.log一下就会发现files数组中每个元素由以下属性构成
                 * 1. ajaxResponse: ajax的的响应结果
                 * 2. base: 文件的base64编码
                 * 3. checked: 该文件是否被选中
                 * 4. file: 文件对象
                 * 5. id: 插件内部标识的文件id
                 * 6. isImg: 插件内部标识文件时否是图片
                 * 7. previewBase: 文件压缩后的base64编码，用于插件内部展示预览图
                 * 8. uploadPercentage: 文件上传进度百分比值
                 * 9. uploadStatus: 文件上传状态
                 */
            },
            onError: function (err) {
                console.log('onError', err);
            },
        });
    </script>
{{end}}
